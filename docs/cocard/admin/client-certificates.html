<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Client-Zertifikate :: Cocard</title>
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Cocard</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Suche ...">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div class="abstand">
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
          <div class="navbar-item dark">Cocard</div>
           <a class="navbar-item" href="../../devnotes/index.html">DevNotes</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cocard" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Cocard</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Cocard</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/dashboard.html">Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/common.html">Allgemeines zur Oberfläche</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/conditions.html">Zustände</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/connector.html">Konnektor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../user/card-terminal.html">Kartenterminal</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user/card-terminal-health-check.html">Health-Check</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/card.html">Karte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/logs.html">Event Logs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/acknowledges.html">Notizen und Acknowledges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/ti-lagebild.html">TI-Lagebild</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/verify-pin.html">PIN-Verifizierung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/workplaces.html">Arbeitsplätze</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user/tags.html">Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Konnektor</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="connector-edit.html">Konnektor anlegen/bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="connector-autoreboot.html">Automatischer Reboot</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="card-terminal-edit.html">Kartenterminal anlegen/bearbeiten</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="idle-messages-edit.html">Ruhebildschirme setzen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="duck-terminal.html">Kartenterminal über IP-Adresse prüfen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="card-new.html">Karte anlegen/bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contexts.html">Kontexte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="locations.html">Standorte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networks.html">Netzwerke</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="operational_states.html">Betriebszustände</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jobs.html">Jobverwaltung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authorities.html">Berechtigungen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="smcb-remote-pin.html">Remote PIN für SMC-B Karten</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="client-certificates.html">Client-Zertifikate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ldap-authentication.html">LDAP-Authentifikation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ti-gateway.html">TI-Client (RISE TI Gateway)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../installation/index.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../installation/podman/quickstart.html">Quickstart: podman pods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../first-steps.html">Erste Schritte</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../installation/podman/podman-compose.html">Quickstart: docker-compose</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../first-steps.html">Erste Schritte</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/podman/podman-systemd.html">Systemd und Quadlets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/podman/reverse-proxy.html">Reverse Proxy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Konfiguration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation/configuration.html">Standard-Konfiguration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation/cocard_yml.html">Erweiterte Konfiguration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/checkmk.html">CheckMK Integration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Cocard</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Cocard</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../devnotes/index.html">DevNotes</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devnotes/index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Cocard</a></li>
    <li>Administration</li>
    <li><a href="client-certificates.html">Client-Zertifikate</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Client-Zertifikate</h1>
<div class="sect1">
<h2 id="_import_von_clientzertifikaten"><a class="anchor" href="#_import_von_clientzertifikaten"></a>Import von Clientzertifikaten</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Client-Zertifikate kann man in Cocard als P12-Datei oder als ASCII-Text (PEM-Format) importieren, je nach dem, in welchem Format das Zertifikat vorliegt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/certificate/client-certificates-index-with-menu.png" alt="client certificates index with menu">
</div>
</div>
<div class="paragraph">
<p>Der rote Pfeil markiert den Import im P12-Format, darunter ist die Importmöglichkeit im Textformat (PEM).</p>
</div>
<div class="sect2">
<h3 id="_import_als_p12_datei"><a class="anchor" href="#_import_als_p12_datei"></a>Import als P12-Datei</h3>
<div class="imageblock">
<div class="content">
<img src="../_images/certificate/client-certificate-import.png" alt="client certificate import">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Feld</th>
<th class="tableblock halign-left valign-top">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Der Name wird zur Auswahl bei der Zuordnung zum Konnektor angezeigt. Hier sind die Angaben zum Clientsystem und der Gültigkeit sinnvoll, ggf. auch der Name des Konnektors, falls das Zertifikat auf dem Konnektor ausgestellt wurde und ggf. auch ob es ein RSA oder ECC-Zertifikat ist. Beispiele:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>iMedOne - RSA2048 - 2026-04-02</p>
</li>
<li>
<p>TIKONN-02 - X.Concept - ECC - 2026-04-02</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beschreibung</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zusätzliche Angaben zum Zertifikat, zum Aussteller, Algorithmus etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passphrase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passwort für den P12-Container, das für den Import erforderlich ist</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_import_via_ascii_text"><a class="anchor" href="#_import_via_ascii_text"></a>Import via ASCII-Text</h3>
<div class="paragraph">
<p>Wenn Client-Zertifikat und Private Key im PEM-Format vorliegen, kann man hier einfach den Textinhalt mit Cut-and-Paste in das Formularfeld kopieren.</p>
</div>
<div class="paragraph">
<p>Wichtig: unbedingt <code>-----BEGIN CERTIFICATE-----</code> und <code>-----END CERTIFICATE-----</code>
mit kopieren.</p>
</div>
<div class="paragraph">
<p>Den Private Key kopiert man analog dazu in das vorgesehene Feld. Der Private Key sollte passwortgeschützt sein.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/certificate/client-certificate-new.png" alt="client certificate new">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tags"><a class="anchor" href="#_tags"></a>Tags</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Man kann einem Konnektor mehrere Zertifikate zuordnen. Woher weiß der Konnektor jetzt, welches Zertifikat für welchen Kontext zu nutzen ist? Idealerweise steht das Clientsystem im Common Name, z.B. <code>CN=SAP</code>. Manche Konnektoren erzwingen sogar, dass das im Aufrufkontext verwendete Clientsystem so im <code>CN</code> stehen muss. Auf so einem Konnektor erstellte Zertifikate entsprechen auch der Anforderung. Andere Konnektoren wie die vKonns des RISE-TI-Gateways erstellen Zertifikate, die im <code>CN</code> nicht das Clientsystem enthalten. Cocard kann auch mit solchen Zertifikaten umgehen. Man ergänzt beim Client-Zertifikat ein Tag mit dem Namen des gewünschten Client-Systems:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/certificate/client-certificate-edit.png" alt="client certificate edit">
</div>
<div class="title">Abbildung 1. Tag zum Client-Zertifikat hinzufügen</div>
</div>
<div class="paragraph">
<p>Cocard prüft die dem Konnektor zugeordneten Zertifikate in folgender Reihenfolge:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Zertifikat mit CN=&lt;clientsystem&gt;</p>
</li>
<li>
<p>Zertifikat mit Tag &lt;clientsystem&gt;</p>
</li>
<li>
<p>Das erste gefundene Zertifikat</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_import_als_p12_datei_2"><a class="anchor" href="#_import_als_p12_datei_2"></a>Import als P12-Datei</h3>
<div class="paragraph">
<p>Wenn Cocard die P12-Datei nicht importieren kann, liegt das vielleicht an einem Container-Format, das OpenSSL 3.x nicht mag.</p>
</div>
<div class="paragraph">
<p>Mit OpenSSL kann das das einfach testen:</p>
</div>
<div class="listingblock">
<div class="title">OpenSSL 3.0: P12 prüfen auf Lesbarkeit</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">openssl pkcs12 -noout -in TEST.p12 -info</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wenn jetzt ein <code>unsupported:crypto</code> erscheint, kann Cocard das P12 nicht so einfach lesen. Ergänzt man die <code>-legacy</code>-Option und es erscheint kein Fehler mehr, lässt sich die P12-Datei in ein aktuelles Format konvertieren:</p>
</div>
<div class="listingblock">
<div class="title">OpenSSL 3.0: P12 prüfen auf Lesbarkeit - jetzt mit -legacy Option</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">openssl pkcs12 -noout -in TEST.p12 -info -legacy</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Altes P12-Format mit OpenSSL 3.x in aktuelles Format konvertieren:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">openssl pkcs12 -in TEST.p12 -nocerts -legacy -out TEST.key.pem
openssl pkcs12 -in TEST.p12 -clcerts -legacy -nokeys -out TEST.cert.pem
openssl pkcs12 -export -in TEST.cert.pem -inkey TEST.key.pem -out TEST-NEW.p12</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <span>Wolfgang Barth (C) 2024-2025</span>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/medium-zoom.min.js"></script>
<script>mediumZoom('img:not(.copy-icon');</script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/lunr-languages.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
