= RISE::CardTerminalProxies
:author: Wolfgang Barth
:revdate: 2025-10-20
:imagesdir: ../../images

== KTProxy::Crupdator

image:::rise/ktproxy-crupdator.svg[]

== Snippets

.ti_clients/kt_proxies_controller.rb
[source,ruby]
----
    def fetch
      @kt_proxies = []
      @err_proxies = []
      rtic = RISE::TIClient.new(ti_client: @proxyable)
      rtic.get_card_terminal_proxies do |result|
        result.on_success do |message, value|
          proxies = value['proxies'] || []
          proxies.each do |proxy|
            ktp = KTProxies::Crupdator.new(ti_client: @proxyable, proxy_hash: proxy)
            if ktp.save
              @kt_proxies << ktp.kt_proxy
            else
              @err_proxies << proxy
            end
          end
        end
        result.on_failure do |message|
          flash[:alert] = message
        end
      end
      respond_with(@kt_proxies)
    end

----

